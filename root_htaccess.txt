# Redirection vers le dossier public
RewriteEngine On

# Si l'URL ne commence pas par /public
RewriteCond %{REQUEST_URI} !^/public/

# Et si ce n'est pas un fichier existant
RewriteCond %{REQUEST_FILENAME} !-f

# Et si ce n'est pas un dossier existant 
RewriteCond %{REQUEST_FILENAME} !-d

# Alors rediriger vers /public
RewriteRule ^(.*)$ /public/$1 [L]

# Protection contre listing des dossiers
Options -Indexes

# Définition du charset par défaut
AddDefaultCharset UTF-8

# Sécurité des fichiers sensibles
<FilesMatch "^\.">
    Order allow,deny
    Deny from all
</FilesMatch>

# Protection du fichier .env
<Files .env>
    Order allow,deny
    Deny from all
</Files>

# Désactivation de PHP pour les répertoires d'uploads
<Directory "public_html/public/uploads">
    php_flag engine off
</Directory>

# Force HTTPS (décommentez en production)
# RewriteCond %{HTTPS} off
# RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 